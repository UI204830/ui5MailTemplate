<mvc:View xmlns:mvc="sap.ui.core.mvc"
          xmlns="sap.m"
          xmlns:f="sap.f"
          xmlns:card="sap.f.cards"
          xmlns:core="sap.ui.core"
          xmlns:l="sap.ui.layout"
          xmlns:form="sap.ui.layout.form"
          controllerName="meldeappui5.controller.CreateNotification"
          displayBlock="true">
    <Page id="requestPage" showHeader="false">
        <content>
            <l:Grid width="98%">
                <VBox class="sapUiSmallMarginEnd" justifyContent="SpaceBetween" width="98%">
                    <layoutData>
                        <l:GridData span="XL12 L12 M8 S6"/>
                    </layoutData>
                    <HBox class="sapUiSmallMarginEnd" width="98%">
                        <Image src="./icons/Meldeapp_Icon.png" width="100px" height="100px" id="image2"
                               class="sapUiSmallMargin"/>
                        <l:VerticalLayout>
                            <FormattedText
                                    htmlText="&lt;strong>{i18n>txt.headline.mfm}&lt;/strong>"
                                    class="sapUiLargeMarginTop"/>
                            <Text
                                    text="{i18n>txt.header.part1}"
                                    class="sapUiTinyMarginTop"/>
                        </l:VerticalLayout>
                    </HBox>
                    <VBox class="sapUiSmallMarginEnd" width="98%">
                        <l:VerticalLayout>
                            <Text wrapping="true" class="sapUiTinyMarginTop"
                                  text="{i18n>txt.header.part2}"/>
                            <Text text="{i18n>txt.header.part3}" class="sapUiTinyMarginTop"/>
                        </l:VerticalLayout>
                    </VBox>
                </VBox>
            </l:Grid>


            <l:Grid defaultSpan="XL4 L4 M11 S12"
                    defaultIndent="XL0 L0 M1 S0">
                <HBox class="sapUiSmallMarginBegin">
                    <f:Card width="350px"
                            height="360px">
                        <f:header>
                            <card:Header title="Kontaktdaten"
                                         iconSrc="sap-icon://business-card"/>
                        </f:header>
                        <f:content>
                            <form:SimpleForm
                                    editable="true"
                                    adjustLabelSpan="true"
                                    layout="ResponsiveGridLayout"
                                    labelSpanXL="2"
                                    labelSpanL="2"
                                    labelSpanM="12"
                                    columnsXL="2"
                                    columnsL="1"
                                    columnsM="1">
                                <form:content>
                                    <Label text="Vorname"/>
                                    <Input value="{loginModel>/firstname}" enabled="{appModel>/robotics}"/>
                                    <Label text="Name"/>
                                    <Input value="{loginModel>/lastname}" enabled="{appModel>/robotics}"/>
                                    <Label text="E-Mail"/>
                                    <Input value="{loginModel>/email}" enabled="{appModel>/robotics}"/>
                                    <Label text="Telefonnummer"/>
                                    <Input value="{loginModel>/telephone}" type="Number"/>
                                </form:content>
                            </form:SimpleForm>
                        </f:content>
                    </f:Card>
                </HBox>

                <HBox class="sapUiSmallMarginBegin">
                    <layoutData>
                        <l:GridData span="XL8 L8"/>
                    </layoutData>

                    <f:Card height="360px"
                            width="auto">
                        <f:header>
                            <card:Header title="Wichtige Hinweise"
                                         iconSrc="sap-icon://message-warning"/>
                        </f:header>

                        <f:content>
                            <VBox>
                                <HBox class="sapUiSmallMargin">
                                    <core:HTML
                                            content='&lt;div class=&quot;content&quot;&gt;&lt;div&gt;{i18n>txt.hint.content.header}&lt;ul&gt;
                                        &lt;li class="sapUiSmallMarginBottom sapUiSmallMarginEnd"&gt;{i18n>ul.content1} &lt;a target=&quot;_blank&quot; href=&quot;https://itportal.rwe.com/sp&quot;&gt;Web_Link.&lt;/a&gt; &lt;/li&gt;
                                        &lt;li class="sapUiSmallMarginBottom sapUiSmallMarginEnd"&gt;{i18n>ul.content2}&lt;/li&gt;
                                        &lt;li class="sapUiSmallMarginEnd"&gt;{i18n>ul.content3} &lt;a target=&quot;_blank&quot; href=&quot;https://raumbuchungssystem.rwe.com/&quot;&gt;Raumbuchungssystem Gingco. &lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt;&lt;/div&gt;&lt;/div&gt;'/>
                                </HBox>
                            </VBox>
                        </f:content>
                    </f:Card>
                </HBox>
            </l:Grid>

            <l:Grid>
                <VBox direction="Column">
                    <Label width="100%" text="Kategorie:" class="sapUiSmallMarginTop"/>
                    <Select width="100%" id="selectCategory"
                            change="onSelectCategory" items="{dropdownModel>/categoryset}"
                            tooltip="Kategorie">
                        <core:Item key="{dropdownModel>category}" text="{dropdownModel>description}"/>
                    </Select>
                    <layoutData>
                        <l:GridData span="XL3 L4 M6 S6"/>
                    </layoutData>
                </VBox>
                <VBox direction="Column">
                    <items>
                        <Label text="Straße / PLZ / Ort / Volltextsuche:"
                               required="true"
                               class="sapUiSmallMarginTop"/>
                        <Input id="fullsearchInput"
                               placeholder="Gebäude suchen und auswählen"
                               showSuggestion="true"
                               liveChange="onLiveBuildingChangeInput"
                               valueLiveUpdate="true"
                               tooltip="Straße, PLZ, Ort oder Volltextsuche"
                               showTableSuggestionValueHelp="false"
                               suggestionRows="{buildingSetModel>/}"
                               enableSuggestionsHighlighting="true"
                               autocomplete="false"
                               suggestionItemSelected="onSuggestionItemSelected">
                            <suggestionColumns>
                                <Column popinDisplay="Inline" demandPopin="true">
                                    <Label text="Gebäude"/>
                                </Column>
                                <Column hAlign="Center" popinDisplay="Inline" demandPopin="true" width="20%">
                                    <Label text="Gebis Nr."/>
                                </Column>
                                <Column hAlign="Center" popinDisplay="Inline" demandPopin="true" width="0%"/>
                                <Column hAlign="Center" popinDisplay="Inline" demandPopin="true" width="0%"/>
                            </suggestionColumns>
                            <suggestionRows>
                                <ColumnListItem>
                                    <cells>
                                        <ObjectIdentifier title="{buildingSetModel>buldingName}"
                                                          text="{buildingSetModel>street} {buildingSetModel>houseNumber} {buildingSetModel>postalCode} {buildingSetModel>city}"/>
                                        <Label id="selectedBuildingGebis" text="{buildingSetModel>gebisNumber}"/>
                                        <Label id="selectedBuildingKey"
                                               text="{buildingSetModel>funcLocationId}"
                                               visible="false"/>
                                        <Label id="selectedBuildingName"
                                               text="{buildingSetModel>buldingName}"
                                               visible="false"/>
                                    </cells>
                                </ColumnListItem>
                            </suggestionRows>
                        </Input>
                    </items>
                    <layoutData>
                        <l:GridData span="XL3 L4 M6 S6"/>
                    </layoutData>
                </VBox>
            </l:Grid>
            <l:Grid>
                <VBox direction="Column">
                    <layoutData>
                        <f:GridContainerItemLayoutData columns="2"/>
                    </layoutData>
                    <items>
                        <Label width="100%" text="Etage:"
                               class="sapUiSmallMarginTop"/>
                        <Input liveChange="onLiveChangeInput"
                               value="{notificationcreateModel>/floor}"
                               width="100%" id="inputFloor"
                               tooltip="Bitte geben Sie hier die betreffende Etage an."/>
                    </items>
                    <layoutData>
                        <l:GridData span="XL3 L4 M6 S6"/>
                    </layoutData>
                </VBox>
                <VBox direction="Column">
                    <layoutData>
                        <f:GridContainerItemLayoutData columns="2"/>
                    </layoutData>
                    <items>
                        <Label width="100%"
                               text="Raum/Raumnummer:"
                               class="sapUiSmallMarginTop"/>
                        <Input width="100%"
                               value="{notificationcreateModel>/room}"
                               liveChange="onLiveChangeInput"
                               tooltip="Bitte geben Sie hier - falls möglich - eine genaue Örtlichkeit an."/>
                    </items>
                    <layoutData>
                        <l:GridData span="XL3 L4 M6 S6"/>
                    </layoutData>
                </VBox>
            </l:Grid>
            <l:Grid>
                <VBox direction="Column">
                    <items>
                        <Label text="Mein Anliegen:  ({= ${notificationcreateModel>/shortText}.length} / 40)"
                               required="true"
                               class="sapUiSmallMarginTop"/>
                        <Input value="{notificationcreateModel>/shortText}"
                               required="true"
                               maxLength="40"
                               width="100%"
                               tooltip="Bitte geben Sie hier kurz Ihr konkretes Anliegen an."
                               id="idInputShortText"
                               valueLiveUpdate="true"/>
                    </items>
                    <layoutData>
                        <l:GridData span="XL12 L12 M12 S12"/>
                    </layoutData>
                </VBox>
                <VBox direction="Column">
                    <items>
                        <Label text="Beschreibung:"
                               class="sapUiSmallMarginTop"/>
                        <TextArea value="{notificationcreateModel>/longText}" rows="5" showExceededText="true"
                                  maxLength="1000"
                                  width="100%"
                                  tooltip="Beschreibungstext"
                                  liveChange="handleLongTextLiveChange"
                                  id="textAreaLongText"
                                  valueLiveUpdate="true"/>
                    </items>
                    <layoutData>
                        <l:GridData span="XL12 L12 M12 S12"/>
                    </layoutData>
                </VBox>
            </l:Grid>
            <l:Grid>
                <l:dependents>
                    <core:Fragment fragmentName="meldeappui5.view.fragment.BusyDialog" type="XML"/>
                </l:dependents>
                <VBox direction="Column">
                    <items>
                        <UploadCollection id="UploadCollection" maximumFilenameLength="55" maximumFileSize="10"
                                          multiple="true" sameFilenameAllowed="true"
                                          fileType="jpg,png" instantUpload="false" change="onChange"
                                          noDataText="Foto hinzufügen ( Max. 3)"
                                          fileDeleted="onFileDeleted"
                                          filenameLengthExceed="onFilenameLengthExceed"
                                          fileSizeExceed="onFileSizeExceed" typeMissmatch="onTypeMissmatch"
                                          noDataDescription="Dateien für Upload hierher ziehen oder Drucktaste &quot;Hinzufügen&quot; verwenden."
                                          uploadComplete="onUploadComplete"
                                          tooltip="Bitte fügen Sie - falls möglich - bis zu drei Fotos der Situation vor Ort bei."
                                          beforeUploadStarts="onBeforeUploadStarts"/>
                        <CheckBox selected="{notificationcreateModel>/subscribe}"
                                  text="Ich möchte über den weiteren Verlauf per Mail informiert werden">
                            <layoutData>
                                <l:GridData span="XL12 L12 M12 S12"/>
                            </layoutData>
                        </CheckBox>
                        <!--                        <Button text="Meldung erstellen" press="onCreateNotification"/>-->
                    </items>
                    <layoutData>
                        <l:GridData span="XL12 L12 M12 S12"/>
                    </layoutData>
                </VBox>
                <VBox direction="Column">
                    <layoutData>
                        <l:GridData span="XL12 L12 M12 S12"/>
                    </layoutData>
                </VBox>
            </l:Grid>
        </content>

        <footer>
            <OverflowToolbar>
                <ToolbarSpacer/>
                <Button text="Meldung erstellen" press="onCreateNotification"/>
            </OverflowToolbar>
        </footer>
    </Page>
</mvc:View>
